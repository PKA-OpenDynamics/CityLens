(()=>{var e={};e.id=452,e.ids=[452],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},1588:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),s(2570),s(4555),s(5866),s(1382);var r=s(3191),a=s(8716),n=s(7922),l=s.n(n),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["(dashboard)",{children:["geographic",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2570)),"/Users/vudangkhoa/Working/CityLens/web-dashboard/src/app/(dashboard)/geographic/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4555)),"/Users/vudangkhoa/Working/CityLens/web-dashboard/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,1382)),"/Users/vudangkhoa/Working/CityLens/web-dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/vudangkhoa/Working/CityLens/web-dashboard/src/app/(dashboard)/geographic/page.tsx"],u="/(dashboard)/geographic/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/geographic/page",pathname:"/geographic",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7607:(e,t,s)=>{Promise.resolve().then(s.bind(s,1512))},8319:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},3353:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let r=s(1174);s(326),s(7577);let a=r._(s(7028));function n(e,t){var s;let r={loading:e=>{let{error:t,isLoading:s,pastDelay:r}=e;return null}};"function"==typeof e&&(r.loader=e);let n={...r,...t};return(0,a.default)({...n,modules:null==(s=n.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},933:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let r=s(4129);function a(e){let{reason:t,children:s}=e;throw new r.BailoutToCSRError(t)}},7028:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let r=s(326),a=s(7577),n=s(933),l=s(6618);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let t={...o,...e},s=(0,a.lazy)(()=>t.loader().then(i)),c=t.loading;function d(e){let i=c?(0,r.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.PreloadCss,{moduleIds:t.modules}),(0,r.jsx)(s,{...e})]}):(0,r.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(s,{...e})});return(0,r.jsx)(a.Suspense,{fallback:i,children:o})}return d.displayName="LoadableComponent",d}},6618:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return n}});let r=s(326),a=s(4580);function n(e){let{moduleIds:t}=e,s=(0,a.getExpectedRequestStore)("next/dynamic css"),n=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files.filter(e=>e.endsWith(".css"));n.push(...t)}}return 0===n.length?null:(0,r.jsx)(r.Fragment,{children:n.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},1512:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>et});var r=s(326),a=s(7577),n=s(3353),l=s.n(n),i=s(2881);let o=(0,i.Z)("PanelRightClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]]),c=(0,i.Z)("PanelRightOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]]);var d=s(1405);let u=(0,i.Z)("Satellite",[["path",{d:"M13 7 9 3 5 7l4 4",key:"vyckw6"}],["path",{d:"m17 11 4 4-4 4-4-4",key:"rchckc"}],["path",{d:"m8 12 4 4 6-6-4-4Z",key:"1sshf7"}],["path",{d:"m16 8 3-3",key:"x428zp"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}]]);var x=s(4935),h=s(9979),m=s(1223),p=s(7636);let g=(0,i.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),b=(0,i.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var f=s(8307);let j=(0,i.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function y({selectedIds:e,onSelectionChange:t,maxSelection:s=10,className:n}){let[l,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(""),[d,u]=(0,a.useState)([]),[x,h]=(0,a.useState)(!0),j=(0,a.useMemo)(()=>{if(!o.trim())return d;let e=o.toLowerCase();return d.filter(t=>t.name.toLowerCase().includes(e)||t.name_en&&t.name_en.toLowerCase().includes(e))},[d,o]),y=(0,a.useMemo)(()=>({phuong:j.filter(e=>e.name.startsWith("Phường")),xa:j.filter(e=>e.name.startsWith("X\xe3"))}),[j]),N=(0,a.useMemo)(()=>d.filter(t=>e.includes(t.id)),[d,e]),w=(0,a.useCallback)(r=>{e.includes(r)?t(e.filter(e=>e!==r)):e.length<s&&t([...e,r])},[e,t,s]),k=(0,a.useCallback)(()=>{t([])},[t]),C=(0,a.useCallback)(r=>{let a=("phuong"===r?y.phuong:y.xa).slice(0,s-e.length).map(e=>e.id);t([...new Set([...e,...a])])},[y,e,s,t]);return(0,r.jsxs)("div",{className:(0,m.cn)("relative",n),children:[(0,r.jsxs)("button",{onClick:()=>i(!l),className:(0,m.cn)("w-full flex items-center justify-between gap-2 px-4 py-2.5 rounded-lg","bg-card border border-border hover:bg-muted transition-colors text-left"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsx(p.Z,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),N.length>0?r.jsx("span",{className:"truncate text-foreground",children:1===N.length?N[0].name:`${N.length} đơn vị đ\xe3 chọn`}):r.jsx("span",{className:"text-muted-foreground",children:"Chọn phường/x\xe3..."})]}),r.jsx(g,{className:(0,m.cn)("w-4 h-4 text-muted-foreground transition-transform",l&&"rotate-180")})]}),N.length>0&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[N.map(e=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-accent/10 text-accent rounded-md text-xs",children:[e.name,r.jsx("button",{onClick:t=>{t.stopPropagation(),w(e.id)},className:"hover:text-accent-foreground",children:r.jsx(b,{className:"w-3 h-3"})})]},e.id)),N.length>1&&r.jsx("button",{onClick:k,className:"px-2 py-1 text-xs text-muted-foreground hover:text-foreground",children:"X\xf3a tất cả"})]}),l&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>i(!1)}),(0,r.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-1 z-[9999] bg-card border border-border rounded-lg shadow-xl max-h-[60vh] overflow-hidden",children:[r.jsx("div",{className:"p-2 border-b border-border",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(f.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),r.jsx("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"T\xecm kiếm phường/x\xe3...",className:"w-full pl-9 pr-4 py-2 bg-muted rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-accent",autoFocus:!0})]})}),(0,r.jsxs)("div",{className:"px-3 py-2 text-xs text-muted-foreground border-b border-border flex justify-between",children:[(0,r.jsxs)("span",{children:[j.length," / ",d.length," đơn vị"]}),(0,r.jsxs)("span",{children:["Đ\xe3 chọn: ",e.length," / ",s]})]}),r.jsx("div",{className:"overflow-y-auto",style:{maxHeight:"calc(60vh - 100px)"},children:x?r.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Đang tải..."}):0===j.length?r.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Kh\xf4ng t\xecm thấy"}):(0,r.jsxs)(r.Fragment,{children:[y.phuong.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-muted px-3 py-1.5 flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-xs font-medium text-muted-foreground",children:["Phường (",y.phuong.length,")"]}),r.jsx("button",{onClick:()=>C("phuong"),className:"text-xs text-accent hover:underline",children:"Chọn tất cả"})]}),y.phuong.map(t=>r.jsx(v,{boundary:t,isSelected:e.includes(t.id),onToggle:()=>w(t.id),disabled:!e.includes(t.id)&&e.length>=s},t.id))]}),y.xa.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-muted px-3 py-1.5 flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-xs font-medium text-muted-foreground",children:["X\xe3 (",y.xa.length,")"]}),r.jsx("button",{onClick:()=>C("xa"),className:"text-xs text-accent hover:underline",children:"Chọn tất cả"})]}),y.xa.map(t=>r.jsx(v,{boundary:t,isSelected:e.includes(t.id),onToggle:()=>w(t.id),disabled:!e.includes(t.id)&&e.length>=s},t.id))]})]})})]})]})]})}function v({boundary:e,isSelected:t,onToggle:s,disabled:a}){return(0,r.jsxs)("button",{onClick:s,disabled:a,className:(0,m.cn)("w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-muted transition-colors",t&&"bg-accent/10",a&&"opacity-50 cursor-not-allowed"),children:[r.jsx("div",{className:(0,m.cn)("w-4 h-4 rounded border flex items-center justify-center flex-shrink-0",t?"bg-accent border-accent":"border-border"),children:t&&r.jsx(j,{className:"w-3 h-3 text-white"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:e.name}),e.name_en&&r.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.name_en})]}),(0,r.jsxs)("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:[e.area_km2.toFixed(1)," km\xb2"]})]})}var N=s(8319);let w=(0,i.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),k=(0,i.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),C=(0,i.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),_=(0,i.Z)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);var D=s(6283),S=s(949);let M=(0,i.Z)("ChartArea",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]]);var T=s(4061);let q=(0,i.Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),F=(0,i.Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var O=s(4561);let P=(0,i.Z)("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),Z=(0,i.Z)("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);var L=s(591),B=s(72);let E=(0,i.Z)("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);var I=s(6697);let A=(0,i.Z)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),R=(0,i.Z)("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);var $=s(8998);function U({boundaryId:e,boundaryName:t,boundaryDetails:s}){let[n,l]=(0,a.useState)(null),[i,o]=(0,a.useState)(s||null),[c,u]=(0,a.useState)(!1),[b,f]=(0,a.useState)(null),[j,y]=(0,a.useState)(null),[v,U]=(0,a.useState)({osm:!0,weather:!0,aqi:!0,traffic:!0}),[z,G]=(0,a.useState)(!1),W=(0,a.useCallback)(async()=>{if(e){u(!0),f(null);try{let t=[h.li.getUrbanData(e)];s||t.push(h.li.getBoundaryDetails(e,!1));let r=await Promise.all(t);l(r[0]),s||o(r[1]),y(new Date)}catch(e){console.error("Error fetching data:",e),f("Kh\xf4ng thể tải dữ liệu")}finally{u(!1)}}},[e,s]),V=e=>{U(t=>({...t,[e]:!t[e]}))},H=e=>e<=50?{label:"Tốt",color:"text-green-600",bgColor:"bg-green-500"}:e<=100?{label:"Trung b\xecnh",color:"text-yellow-600",bgColor:"bg-yellow-500"}:e<=150?{label:"K\xe9m",color:"text-orange-600",bgColor:"bg-orange-500"}:e<=200?{label:"Xấu",color:"text-red-600",bgColor:"bg-red-500"}:e<=300?{label:"Rất xấu",color:"text-purple-600",bgColor:"bg-purple-500"}:{label:"Nguy hại",color:"text-rose-700",bgColor:"bg-rose-700"},X=e=>e<20?{label:"Th\xf4ng tho\xe1ng",color:"text-green-600",bgColor:"bg-green-500"}:e<40?{label:"B\xecnh thường",color:"text-emerald-600",bgColor:"bg-emerald-500"}:e<60?{label:"Đ\xf4ng đ\xfac",color:"text-yellow-600",bgColor:"bg-yellow-500"}:e<80?{label:"\xd9n tắc",color:"text-orange-600",bgColor:"bg-orange-500"}:{label:"Tắc nghẽn",color:"text-red-600",bgColor:"bg-red-500"},K=e=>null==e?"--":e.toLocaleString("vi-VN"),Q=e=>({amenity:"Tiện \xedch",shop:"Cửa h\xe0ng",tourism:"Du lịch",leisure:"Giải tr\xed",healthcare:"Y tế",education:"Gi\xe1o dục",finance:"T\xe0i ch\xednh",food:"Ẩm thực",government:"Cơ quan",religion:"T\xf4n gi\xe1o",transport:"Giao th\xf4ng",office:"Văn ph\xf2ng",building:"C\xf4ng tr\xecnh",other:"Kh\xe1c"})[e]||e,J=e=>({primary:"Đường ch\xednh",secondary:"Đường phụ",tertiary:"Đường nh\xe1nh",residential:"Khu d\xe2n cư",service:"Đường dịch vụ",footway:"Đường đi bộ",path:"Đường m\xf2n",cycleway:"Đường xe đạp",unclassified:"Chưa ph\xe2n loại",living_street:"Phố đi bộ",pedestrian:"Khu đi bộ",track:"Đường đất",trunk:"Đường cao tốc",motorway:"Xa lộ"})[e]||e,Y=i?.boundary,ee=i?.statistics;if(!e)return(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-6 text-center",children:[r.jsx(p.Z,{className:"w-10 h-10 text-muted-foreground mx-auto mb-2"}),r.jsx("p",{className:"text-muted-foreground text-sm",children:"Chọn một khu vực để xem dữ liệu"})]});let et=({section:e,icon:t,title:s,source:a,sourceUrl:n,status:l})=>(0,r.jsxs)("button",{onClick:()=>V(e),className:"w-full flex items-center justify-between p-2.5 bg-accent/5 hover:bg-accent/10 rounded-t-lg transition-colors group",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:(0,m.cn)("p-1.5 rounded-md","osm"===e&&"bg-blue-500/20 text-blue-600","weather"===e&&"bg-sky-500/20 text-sky-600","aqi"===e&&"bg-emerald-500/20 text-emerald-600","traffic"===e&&"bg-orange-500/20 text-orange-600"),children:r.jsx(t,{className:"w-4 h-4"})}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("div",{className:"text-sm font-medium text-foreground",children:s}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[r.jsx(N.Z,{className:"w-2.5 h-2.5"}),r.jsx("span",{children:a}),n&&r.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(w,{className:"w-2.5 h-2.5"})})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[l&&r.jsx("span",{className:(0,m.cn)("px-2 py-0.5 rounded-full text-[10px] font-medium text-white",l.bgColor),children:l.label}),v[e]?r.jsx(g,{className:"w-4 h-4 text-muted-foreground"}):r.jsx(k,{className:"w-4 h-4 text-muted-foreground"})]})]}),es=({icon:e,label:t,value:s,unit:a})=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e&&r.jsx(e,{className:"w-3.5 h-3.5"}),r.jsx("span",{className:"text-xs",children:t})]}),(0,r.jsxs)("span",{className:"text-xs font-medium text-foreground",children:[s??"--",a&&r.jsx("span",{className:"text-muted-foreground ml-0.5",children:a})]})]});return(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border overflow-hidden h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"bg-accent/10 border-b border-border px-3 py-2 flex items-center justify-between flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[r.jsx(p.Z,{className:"w-4 h-4 text-accent flex-shrink-0"}),r.jsx("span",{className:"text-sm font-semibold text-foreground truncate",children:t||Y?.name||"Đang tải..."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:W,disabled:c,className:"p-1.5 hover:bg-accent/20 rounded transition-colors",title:"L\xe0m mới dữ liệu",children:r.jsx(d.Z,{className:(0,m.cn)("w-4 h-4 text-muted-foreground",c&&"animate-spin")})}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("button",{onClick:()=>G(!z),className:"p-1.5 hover:bg-accent/20 rounded transition-colors",title:"Xuất dữ liệu",children:r.jsx(C,{className:"w-4 h-4 text-muted-foreground"})}),z&&(0,r.jsxs)("div",{className:"absolute right-0 top-full mt-1 bg-popover border border-border rounded-lg shadow-lg z-50 py-1 min-w-[140px]",children:[(0,r.jsxs)("button",{onClick:()=>{if(!n&&!i)return;let e=t||i?.boundary.name||"boundary",s=[["Nguồn","Chỉ số","Gi\xe1 trị","Đơn vị"]];if(i){let e=i.statistics;s.push(["OSM","T\xean khu vực",i.boundary.name,""]),s.push(["OSM","Loại",6===i.boundary.admin_level?"Quận/Huyện":"Phường/X\xe3",""]),s.push(["OSM","Diện t\xedch",(i.boundary.area_km2||0).toFixed(2),"km\xb2"]),s.push(["OSM","Số POI",String(e.pois.total||0),""]),s.push(["OSM","Số đường",String(e.streets.total||0),""]),s.push(["OSM","Số t\xf2a nh\xe0",String(e.buildings.total||0),""])}n?.weather&&(s.push(["OpenWeather","Nhiệt độ",String(n.weather.temperature?.toFixed(1)||"--"),"\xb0C"]),s.push(["OpenWeather","Cảm gi\xe1c như",String(n.weather.feels_like?.toFixed(1)||"--"),"\xb0C"]),s.push(["OpenWeather","Độ ẩm",String(n.weather.humidity||"--"),"%"]),s.push(["OpenWeather","Tốc độ gi\xf3",String(n.weather.wind_speed?.toFixed(1)||"--"),"m/s"])),n?.air_quality&&(s.push(["AQICN","Chỉ số AQI",String(n.air_quality.aqi||"--"),""]),s.push(["AQICN","PM2.5",String(n.air_quality.pm25?.toFixed(1)||"--"),"\xb5g/m\xb3"]),s.push(["AQICN","PM10",String(n.air_quality.pm10?.toFixed(1)||"--"),"\xb5g/m\xb3"])),n?.traffic&&(s.push(["TomTom","Tốc độ hiện tại",String(n.traffic.current_speed||"--"),"km/h"]),s.push(["TomTom","Tốc độ th\xf4ng thường",String(n.traffic.free_flow_speed||"--"),"km/h"]),s.push(["TomTom","Mức độ \xf9n tắc",String(n.traffic.congestion_percent?.toFixed(0)||"--"),"%"]));let r=new Blob(["\uFEFF"+s.map(e=>e.map(e=>`"${e}"`).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(r),l=document.createElement("a");l.href=a,l.download=`citylens_${e.replace(/\s+/g,"_")}_${new Date().toISOString().slice(0,10)}.csv`,l.click(),URL.revokeObjectURL(a),G(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-accent/20 flex items-center gap-2",children:[r.jsx(_,{className:"w-4 h-4 text-green-600"}),"Xuất CSV"]}),(0,r.jsxs)("button",{onClick:()=>{if(!n&&!i)return;let e=t||i?.boundary.name||"boundary",s=new Blob([JSON.stringify({metadata:{boundary_name:e,exported_at:new Date().toISOString(),data_sources:["OSM","OpenWeather","AQICN","TomTom"]},osm:i?{name:i.boundary.name,osm_id:i.boundary.osm_id,admin_level:i.boundary.admin_level,area_km2:i.boundary.area_km2,statistics:i.statistics}:null,openweather:n?.weather||null,aqicn:n?.air_quality||null,tomtom:n?.traffic||null},null,2)],{type:"application/json"}),r=URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=`citylens_${e.replace(/\s+/g,"_")}_${new Date().toISOString().slice(0,10)}.json`,a.click(),URL.revokeObjectURL(r),G(!1)},className:"w-full px-3 py-2 text-left text-sm hover:bg-accent/20 flex items-center gap-2",children:[r.jsx(D.Z,{className:"w-4 h-4 text-blue-600"}),"Xuất JSON"]})]})]})]})]}),(0,r.jsxs)("div",{className:"px-3 py-2 border-b border-border flex items-center justify-between bg-muted/30",children:[r.jsx("span",{className:"text-[10px] text-muted-foreground",children:j?`Cập nhật: ${j.toLocaleTimeString("vi-VN")}`:"Đang tải..."}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>U({osm:!0,weather:!0,aqi:!0,traffic:!0}),className:"px-2 py-0.5 text-[10px] text-muted-foreground hover:text-foreground hover:bg-accent/20 rounded",children:"Mở tất cả"}),r.jsx("span",{className:"text-muted-foreground",children:"|"}),r.jsx("button",{onClick:()=>U({osm:!1,weather:!1,aqi:!1,traffic:!1}),className:"px-2 py-0.5 text-[10px] text-muted-foreground hover:text-foreground hover:bg-accent/20 rounded",children:"Thu gọn"})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[b&&(0,r.jsxs)("div",{className:"p-3 bg-destructive/10 border border-destructive/30 rounded-lg text-center",children:[r.jsx(S.Z,{className:"w-5 h-5 text-destructive mx-auto mb-1"}),r.jsx("p",{className:"text-xs text-destructive",children:b}),r.jsx("button",{onClick:W,className:"text-xs text-accent underline mt-1",children:"Thử lại"})]}),c&&!n&&!i&&r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(d.Z,{className:"w-6 h-6 text-accent animate-spin"})}),(0,r.jsxs)("div",{className:"border border-blue-500/30 rounded-lg overflow-hidden",children:[r.jsx(et,{section:"osm",icon:x.Z,title:"Dữ liệu địa l\xfd",source:"OpenStreetMap",sourceUrl:"https://www.openstreetmap.org/"}),v.osm&&(0,r.jsxs)("div",{className:"border-t border-blue-500/20 bg-blue-500/5",children:[(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-px bg-blue-500/20 p-px",children:[(0,r.jsxs)("div",{className:"bg-card p-2 text-center",children:[r.jsx(M,{className:"w-3.5 h-3.5 mx-auto mb-0.5 text-blue-600"}),r.jsx("p",{className:"text-sm font-bold text-foreground",children:Y?.area_km2?.toFixed(2)||"--"}),r.jsx("p",{className:"text-[9px] text-muted-foreground",children:"km\xb2"})]}),(0,r.jsxs)("div",{className:"bg-card p-2 text-center",children:[r.jsx(T.Z,{className:"w-3.5 h-3.5 mx-auto mb-0.5 text-blue-600"}),r.jsx("p",{className:"text-sm font-bold text-foreground",children:Y?.population?Y.population.toLocaleString("vi-VN"):"—"}),r.jsx("p",{className:"text-[9px] text-muted-foreground",children:"D\xe2n số"})]}),(0,r.jsxs)("div",{className:"bg-card p-2 text-center",children:[r.jsx(p.Z,{className:"w-3.5 h-3.5 mx-auto mb-0.5 text-blue-600"}),r.jsx("p",{className:"text-sm font-bold text-foreground",children:K(ee?.pois.total)}),r.jsx("p",{className:"text-[9px] text-muted-foreground",children:"Địa điểm"})]})]}),Y?.area_km2&&ee&&(0,r.jsxs)("div",{className:"p-2 border-t border-blue-500/10",children:[r.jsx("p",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Mật độ ph\xe2n bố"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-1.5",children:[(0,r.jsxs)("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-1.5 rounded text-center",children:[r.jsx("p",{className:"text-xs font-bold text-blue-700 dark:text-blue-400",children:(ee.pois.total/Y.area_km2).toFixed(1)}),r.jsx("p",{className:"text-[8px] text-blue-600 dark:text-blue-500",children:"POI/km\xb2"})]}),(0,r.jsxs)("div",{className:"bg-green-100 dark:bg-green-900/30 p-1.5 rounded text-center",children:[r.jsx("p",{className:"text-xs font-bold text-green-700 dark:text-green-400",children:(ee.streets.total/Y.area_km2).toFixed(0)}),r.jsx("p",{className:"text-[8px] text-green-600 dark:text-green-500",children:"Đường/km\xb2"})]}),(0,r.jsxs)("div",{className:"bg-amber-100 dark:bg-amber-900/30 p-1.5 rounded text-center",children:[r.jsx("p",{className:"text-xs font-bold text-amber-700 dark:text-amber-400",children:(ee.buildings.total/Y.area_km2).toFixed(0)}),r.jsx("p",{className:"text-[8px] text-amber-600 dark:text-amber-500",children:"CT/km\xb2"})]})]})]}),(0,r.jsxs)("div",{className:"divide-y divide-blue-500/10",children:[r.jsx(es,{icon:q,label:"Tổng số t\xf2a nh\xe0",value:K(ee?.buildings.total)}),r.jsx(es,{icon:F,label:"T\xf2a nh\xe0 c\xf3 t\xean",value:K(ee?.buildings.named)}),r.jsx(es,{icon:O.Z,label:"Tổng số đường",value:K(ee?.streets.total)}),r.jsx(es,{icon:F,label:"Đường c\xf3 t\xean",value:K(ee?.streets.named)}),r.jsx(es,{icon:p.Z,label:"Loại POI kh\xe1c nhau",value:ee?.pois.category_types,unit:"loại"})]}),ee?.pois.by_category&&Object.keys(ee.pois.by_category).length>0&&(0,r.jsxs)("div",{className:"p-2 border-t border-blue-500/10",children:[r.jsx("p",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Ph\xe2n loại địa điểm (POI)"}),r.jsx("div",{className:"space-y-1",children:Object.entries(ee.pois.by_category).sort(([,e],[,t])=>t-e).slice(0,6).map(([e,t])=>(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground capitalize",children:Q(e)}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("div",{className:"w-16 h-1.5 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${Math.min(t/ee.pois.total*100,100)}%`}})}),r.jsx("span",{className:"font-medium w-8 text-right",children:t})]})]},e))})]}),ee?.streets.by_highway_type&&Object.keys(ee.streets.by_highway_type).length>0&&(0,r.jsxs)("div",{className:"p-2 border-t border-blue-500/10",children:[r.jsx("p",{className:"text-[10px] font-medium text-muted-foreground mb-1.5",children:"Loại đường"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(ee.streets.by_highway_type).sort(([,e],[,t])=>t-e).slice(0,5).map(([e,t])=>(0,r.jsxs)("span",{className:"px-1.5 py-0.5 bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 rounded text-[9px]",children:[J(e),": ",t]},e))})]})]})]}),(0,r.jsxs)("div",{className:"border border-sky-500/30 rounded-lg overflow-hidden",children:[r.jsx(et,{section:"weather",icon:P,title:"Thời tiết",source:"OpenWeatherMap",sourceUrl:"https://openweathermap.org/",status:n?.weather?{label:`${n.weather.temperature?.toFixed(0)}\xb0C`,color:"text-sky-600",bgColor:"bg-sky-500"}:null}),v.weather&&r.jsx("div",{className:"border-t border-sky-500/20 bg-sky-500/5 divide-y divide-sky-500/10",children:n?.weather?(0,r.jsxs)(r.Fragment,{children:[r.jsx(es,{icon:Z,label:"Nhiệt độ",value:n.weather.temperature?.toFixed(1),unit:"\xb0C"}),r.jsx(es,{icon:Z,label:"Cảm gi\xe1c như",value:n.weather.feels_like?.toFixed(1),unit:"\xb0C"}),r.jsx(es,{icon:L.Z,label:"Độ ẩm",value:n.weather.humidity,unit:"%"}),r.jsx(es,{icon:B.Z,label:"Tốc độ gi\xf3",value:n.weather.wind_speed?.toFixed(1),unit:"m/s"}),r.jsx(es,{icon:P,label:"M\xe2y che phủ",value:n.weather.clouds,unit:"%"})]}):r.jsx("div",{className:"p-3 text-center text-xs text-muted-foreground",children:c?"Đang tải...":"Kh\xf4ng c\xf3 dữ liệu"})})]}),(0,r.jsxs)("div",{className:"border border-emerald-500/30 rounded-lg overflow-hidden",children:[r.jsx(et,{section:"aqi",icon:E,title:"Chất lượng kh\xf4ng kh\xed",source:"AQICN / WAQI",sourceUrl:"https://aqicn.org/",status:n?.air_quality?H(n.air_quality.aqi):null}),v.aqi&&r.jsx("div",{className:"border-t border-emerald-500/20 bg-emerald-500/5 divide-y divide-emerald-500/10",children:n?.air_quality?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"Chỉ số AQI"}),r.jsx("span",{className:(0,m.cn)("text-lg font-bold",H(n.air_quality.aqi).color),children:n.air_quality.aqi})]}),r.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:(0,m.cn)("h-full rounded-full transition-all",H(n.air_quality.aqi).bgColor),style:{width:`${Math.min(n.air_quality.aqi/3,100)}%`}})}),(0,r.jsxs)("div",{className:"flex justify-between text-[9px] text-muted-foreground mt-1",children:[r.jsx("span",{children:"0 Tốt"}),r.jsx("span",{children:"100 TB"}),r.jsx("span",{children:"200 Xấu"}),r.jsx("span",{children:"300+"})]})]}),r.jsx(es,{icon:I.Z,label:"PM2.5",value:n.air_quality.pm25?.toFixed(1),unit:"\xb5g/m\xb3"}),r.jsx(es,{icon:I.Z,label:"PM10",value:n.air_quality.pm10?.toFixed(1),unit:"\xb5g/m\xb3"}),r.jsx(es,{icon:I.Z,label:"O₃ (Ozone)",value:n.air_quality.o3?.toFixed(1),unit:"\xb5g/m\xb3"}),r.jsx(es,{icon:I.Z,label:"NO₂",value:n.air_quality.no2?.toFixed(1),unit:"\xb5g/m\xb3"}),r.jsx(es,{icon:I.Z,label:"SO₂",value:n.air_quality.so2?.toFixed(1),unit:"\xb5g/m\xb3"}),r.jsx(es,{icon:I.Z,label:"CO",value:n.air_quality.co?.toFixed(1),unit:"\xb5g/m\xb3"})]}):r.jsx("div",{className:"p-3 text-center text-xs text-muted-foreground",children:c?"Đang tải...":"Kh\xf4ng c\xf3 dữ liệu"})})]}),(0,r.jsxs)("div",{className:"border border-orange-500/30 rounded-lg overflow-hidden",children:[r.jsx(et,{section:"traffic",icon:A,title:"Giao th\xf4ng",source:"TomTom Traffic",sourceUrl:"https://www.tomtom.com/traffic-index/",status:n?.traffic?X(n.traffic.congestion_percent||0):null}),v.traffic&&r.jsx("div",{className:"border-t border-orange-500/20 bg-orange-500/5 divide-y divide-orange-500/10",children:n?.traffic?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-xs text-muted-foreground",children:"Mức độ \xf9n tắc"}),(0,r.jsxs)("span",{className:(0,m.cn)("text-lg font-bold",X(n.traffic.congestion_percent||0).color),children:[n.traffic.congestion_percent?.toFixed(0),"%"]})]}),r.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:(0,m.cn)("h-full rounded-full transition-all",X(n.traffic.congestion_percent||0).bgColor),style:{width:`${Math.min(n.traffic.congestion_percent||0,100)}%`}})}),(0,r.jsxs)("div",{className:"flex justify-between text-[9px] text-muted-foreground mt-1",children:[r.jsx("span",{children:"Th\xf4ng tho\xe1ng"}),r.jsx("span",{children:"Đ\xf4ng đ\xfac"}),r.jsx("span",{children:"Tắc nghẽn"})]})]}),r.jsx(es,{icon:R,label:"Tốc độ hiện tại",value:n.traffic.current_speed,unit:"km/h"}),r.jsx(es,{icon:R,label:"Tốc độ th\xf4ng thường",value:n.traffic.free_flow_speed,unit:"km/h"}),n.traffic.travel_time&&r.jsx(es,{icon:$.Z,label:"Thời gian di chuyển",value:n.traffic.travel_time,unit:"gi\xe2y"}),(0,r.jsxs)("div",{className:"p-2 bg-orange-500/10",children:[r.jsx("div",{className:"text-[10px] text-muted-foreground mb-1",children:"Ch\xfa th\xedch m\xe0u đường tr\xean bản đồ:"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-[9px]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-3 h-1 rounded bg-green-500"}),r.jsx("span",{children:"Th\xf4ng tho\xe1ng"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-3 h-1 rounded bg-yellow-500"}),r.jsx("span",{children:"Chậm"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-3 h-1 rounded bg-orange-500"}),r.jsx("span",{children:"Đ\xf4ng đ\xfac"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"w-3 h-1 rounded bg-red-600"}),r.jsx("span",{children:"\xd9n tắc"})]})]})]})]}):r.jsx("div",{className:"p-3 text-center text-xs text-muted-foreground",children:c?"Đang tải...":"Kh\xf4ng c\xf3 dữ liệu"})})]}),(0,r.jsxs)("div",{className:"mt-3 p-2.5 bg-muted/30 rounded-lg border border-border/50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(N.Z,{className:"w-3.5 h-3.5 text-accent"}),r.jsx("span",{className:"text-[10px] font-medium text-foreground",children:"Nguồn dữ liệu LOD"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-[9px]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),r.jsx("span",{className:"text-muted-foreground",children:"OSM - Địa l\xfd"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-sky-500"}),r.jsx("span",{className:"text-muted-foreground",children:"OpenWeather - Thời tiết"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),r.jsx("span",{className:"text-muted-foreground",children:"AQICN - Kh\xf4ng kh\xed"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),r.jsx("span",{className:"text-muted-foreground",children:"TomTom - Giao th\xf4ng"})]})]})]})]})]})}let z=l()(async()=>{},{loadableGenerated:{modules:["app/(dashboard)/geographic/page.tsx -> react-leaflet"]},ssr:!1}),G=l()(async()=>{},{loadableGenerated:{modules:["app/(dashboard)/geographic/page.tsx -> react-leaflet"]},ssr:!1}),W=l()(async()=>{},{loadableGenerated:{modules:["app/(dashboard)/geographic/page.tsx -> react-leaflet"]},ssr:!1}),V=l()(async()=>{},{loadableGenerated:{modules:["app/(dashboard)/geographic/page.tsx -> react-leaflet"]},ssr:!1}),H=l()(async()=>{},{loadableGenerated:{modules:["app/(dashboard)/geographic/page.tsx -> react-leaflet"]},ssr:!1}),X=l()(async()=>{},{loadableGenerated:{modules:["app/(dashboard)/geographic/page.tsx -> react-leaflet"]},ssr:!1}),K=[21.028511,105.804817],Q={satellite:{name:"Vệ tinh",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"&copy; Esri, Maxar, Earthstar Geographics"},osm:{name:"Bản đồ",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'},hybrid:{name:"Hybrid",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"&copy; Esri"}},J={url:"https://api.tomtom.com/traffic/map/4/tile/flow/relative0/{z}/{x}/{y}.png?key=swPEVEaK8ok6jx62o7Uj9YTOZfD1B8SR",attribution:"&copy; TomTom Traffic"},Y={hospital:{color:"#dc2626",name:"Bệnh viện",emoji:"\uD83C\uDFE5",priority:1},clinic:{color:"#ef4444",name:"Ph\xf2ng kh\xe1m",emoji:"\uD83C\uDFE5",priority:2},pharmacy:{color:"#f87171",name:"Nh\xe0 thuốc",emoji:"\uD83D\uDC8A",priority:3},doctors:{color:"#ef4444",name:"Ph\xf2ng kh\xe1m",emoji:"\uD83D\uDC68‍⚕️",priority:2},dentist:{color:"#ef4444",name:"Nha khoa",emoji:"\uD83E\uDDB7",priority:3},school:{color:"#4f46e5",name:"Trường học",emoji:"\uD83C\uDFEB",priority:1},kindergarten:{color:"#6366f1",name:"Mầm non",emoji:"\uD83D\uDC76",priority:2},university:{color:"#4338ca",name:"Đại học",emoji:"\uD83C\uDF93",priority:1},college:{color:"#4f46e5",name:"Cao đẳng",emoji:"\uD83C\uDF93",priority:2},library:{color:"#6366f1",name:"Thư viện",emoji:"\uD83D\uDCDA",priority:3},bank:{color:"#059669",name:"Ng\xe2n h\xe0ng",emoji:"\uD83C\uDFE6",priority:1},atm:{color:"#10b981",name:"C\xe2y ATM",emoji:"\uD83D\uDCB3",priority:3},supermarket:{color:"#ea580c",name:"Si\xeau thị",emoji:"\uD83D\uDED2",priority:1},marketplace:{color:"#f97316",name:"Chợ",emoji:"\uD83C\uDFEA",priority:1},mall:{color:"#ea580c",name:"TTTM",emoji:"\uD83C\uDFEC",priority:1},convenience:{color:"#fb923c",name:"Tiện lợi",emoji:"\uD83C\uDFEA",priority:3},department_store:{color:"#f97316",name:"B\xe1ch h\xf3a",emoji:"\uD83C\uDFEC",priority:2},restaurant:{color:"#d97706",name:"Nh\xe0 h\xe0ng",emoji:"\uD83C\uDF7D️",priority:2},cafe:{color:"#f59e0b",name:"C\xe0 ph\xea",emoji:"☕",priority:3},fast_food:{color:"#fbbf24",name:"Ăn nhanh",emoji:"\uD83C\uDF54",priority:3},bar:{color:"#d97706",name:"Bar",emoji:"\uD83C\uDF7A",priority:4},police:{color:"#475569",name:"C\xf4ng an",emoji:"\uD83D\uDC6E",priority:1},fire_station:{color:"#dc2626",name:"Cứu hỏa",emoji:"\uD83D\uDE92",priority:1},post_office:{color:"#64748b",name:"Bưu điện",emoji:"\uD83D\uDCEE",priority:2},townhall:{color:"#475569",name:"UBND",emoji:"\uD83C\uDFDB️",priority:1},fuel:{color:"#0891b2",name:"Trạm xăng",emoji:"⛽",priority:2},parking:{color:"#06b6d4",name:"B\xe3i đỗ xe",emoji:"\uD83C\uDD7F️",priority:3},bus_station:{color:"#0891b2",name:"Bến xe",emoji:"\uD83D\uDE8C",priority:2},charging_station:{color:"#22d3ee",name:"Trạm sạc",emoji:"\uD83D\uDD0C",priority:3},place_of_worship:{color:"#ca8a04",name:"T\xf4n gi\xe1o",emoji:"⛪",priority:3},hotel:{color:"#7c3aed",name:"Kh\xe1ch sạn",emoji:"\uD83C\uDFE8",priority:2},museum:{color:"#8b5cf6",name:"Bảo t\xe0ng",emoji:"\uD83C\uDFDB️",priority:2},attraction:{color:"#a78bfa",name:"Điểm tham quan",emoji:"\uD83D\uDCF8",priority:2},park:{color:"#16a34a",name:"C\xf4ng vi\xean",emoji:"\uD83C\uDF33",priority:2},sports_centre:{color:"#22c55e",name:"Thể thao",emoji:"\uD83C\uDFC3",priority:3},cinema:{color:"#84cc16",name:"Rạp phim",emoji:"\uD83C\uDFAC",priority:3},default:{color:"#6b7280",name:"Địa điểm",emoji:"\uD83D\uDCCD",priority:5}},ee={hospital:"Bệnh viện",clinic:"Ph\xf2ng kh\xe1m",pharmacy:"Nh\xe0 thuốc",doctors:"Ph\xf2ng kh\xe1m b\xe1c sĩ",dentist:"Nha khoa",school:"Trường học",kindergarten:"Trường mầm non",university:"Đại học",college:"Cao đẳng",library:"Thư viện",bank:"Ng\xe2n h\xe0ng",atm:"C\xe2y ATM",supermarket:"Si\xeau thị",marketplace:"Chợ",mall:"Trung t\xe2m thương mại",convenience:"Cửa h\xe0ng tiện lợi",department_store:"Cửa h\xe0ng b\xe1ch h\xf3a",restaurant:"Nh\xe0 h\xe0ng",cafe:"Qu\xe1n c\xe0 ph\xea",fast_food:"Đồ ăn nhanh",bar:"Qu\xe1n bar",police:"C\xf4ng an",fire_station:"Trạm cứu hỏa",post_office:"Bưu điện",townhall:"UBND",fuel:"Trạm xăng",parking:"B\xe3i đỗ xe",bus_station:"Bến xe bu\xfdt",charging_station:"Trạm sạc điện",place_of_worship:"Nơi thờ c\xfang",hotel:"Kh\xe1ch sạn",museum:"Bảo t\xe0ng",attraction:"Điểm tham quan",park:"C\xf4ng vi\xean",sports_centre:"Trung t\xe2m thể thao",cinema:"Rạp chiếu phim",clothes:"Quần \xe1o",mobile_phone:"Điện thoại",electronics:"Điện tử",furniture:"Nội thất",bakery:"Tiệm b\xe1nh",hairdresser:"L\xe0m t\xf3c",beauty:"Mỹ phẩm"};function et(){let[e,t]=(0,a.useState)(!0),[s,n]=(0,a.useState)(!1),[l,i]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),[b,f]=(0,a.useState)(null),[j,v]=(0,a.useState)(null),[N,w]=(0,a.useState)(null),[k,C]=(0,a.useState)([]),[_,D]=(0,a.useState)(null),[S,M]=(0,a.useState)(null),[T,q]=(0,a.useState)(!0),[F,O]=(0,a.useState)(K),[P,Z]=(0,a.useState)(11),[L,B]=(0,a.useState)(null),[E,I]=(0,a.useState)("satellite"),[A,R]=(0,a.useState)({boundaries:!0,districts:!0,pois:!0,traffic:!1}),$=(0,a.useRef)(null),et=async(e=!1)=>{e?n(!0):t(!0);try{let[e,t,s]=await Promise.allSettled([h.xW.getStatistics(),h.li.getHanoiUnionBoundary({simplify_tolerance:5e-4}),h.li.getBoundariesGeoJSON({admin_level:6})]);if("fulfilled"===e.status&&g(e.value),"fulfilled"===t.status){let e=t.value;f({type:"FeatureCollection",features:[e]}),v({num_wards:e.properties.num_wards,area_km2:e.properties.area_km2})}"fulfilled"===s.status&&w(s.value)}catch(e){console.error("Error fetching geographic data:",e)}t(!1),n(!1)},es=(0,a.useMemo)(()=>({color:"#dc2626",weight:3,opacity:1,fillColor:"#dc2626",fillOpacity:.02}),[]),er=(0,a.useCallback)(e=>{let t=k.includes(e.id);return e.id===_?{color:"#16a34a",weight:4,opacity:1,fillColor:"#22c55e",fillOpacity:.35}:t?{color:"#f59e0b",weight:3,opacity:1,fillColor:"#fbbf24",fillOpacity:.25}:{color:"#ffffff",weight:1.5,opacity:.7,fillColor:"#3b82f6",fillOpacity:.15}},[k,_]),ea=(0,a.useCallback)((e,t)=>{if(e.properties){let s=e.properties.name||e.properties.name_en||"Kh\xf4ng x\xe1c định";t.bindPopup(`
        <div class="p-2">
          <h3 class="font-semibold text-foreground">${s}</h3>
          <p class="text-sm text-muted-foreground">Ranh giới th\xe0nh phố H\xe0 Nội</p>
          <p class="text-sm">${j?.area_km2.toLocaleString("vi-VN")} km\xb2 • ${j?.num_wards} phường/x\xe3</p>
        </div>
      `)}},[j]),en=(0,a.useCallback)((e,t)=>{if(e.properties){let s=e.properties.name||e.properties.name_en||"Kh\xf4ng x\xe1c định",r=e.id,a=k.includes(r);t.bindPopup(`
        <div class="p-2 min-w-[180px]">
          <h3 class="font-bold text-base">${s}</h3>
          <p class="text-sm text-gray-600 mt-1">Click để ${a?"bỏ chọn":"chọn v\xe0 xem chi tiết"}</p>
        </div>
      `),t.on("click",()=>{k.includes(r)?C(e=>e.filter(e=>e!==r)):C(e=>[...e,r])}),t.on("mouseover",()=>{k.includes(r)||t.setStyle({weight:2.5,fillOpacity:.25})}),t.on("mouseout",()=>{k.includes(r)||t.setStyle(er(e))})}},[k,er]),el=e=>{R(t=>({...t,[e]:!t[e]}))},ei=(0,a.useMemo)(()=>`wards-${k.join("-")}-${_}`,[k,_]),eo=(0,a.useCallback)(()=>{O(K),Z(11),B(null)},[]),ec=(0,a.useMemo)(()=>S&&A.pois?S.statistics.top_pois.filter(e=>e.location):[],[S,A.pois]);return(0,r.jsxs)("div",{className:"space-y-4 h-full",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Dữ liệu địa l\xfd"}),(0,r.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Bản đồ ranh giới h\xe0nh ch\xednh H\xe0 Nội • ",j?.num_wards||126," phường/x\xe3"]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx("button",{onClick:()=>q(!T),className:(0,m.cn)("flex items-center gap-2 px-4 py-2 rounded-lg","bg-card border border-border hover:bg-muted transition-colors",T&&"bg-accent/10 border-accent"),title:T?"Ẩn panel chi tiết":"Hiện panel chi tiết",children:T?r.jsx(o,{className:"w-4 h-4"}):r.jsx(c,{className:"w-4 h-4"})}),(0,r.jsxs)("button",{onClick:()=>et(!0),disabled:s,className:(0,m.cn)("flex items-center gap-2 px-4 py-2 rounded-lg","bg-accent text-white hover:bg-accent/90 transition-colors","disabled:opacity-50 disabled:cursor-not-allowed"),children:[r.jsx(d.Z,{className:(0,m.cn)("w-4 h-4",s&&"animate-spin")}),r.jsx("span",{className:"hidden sm:inline",children:"L\xe0m mới"})]})]})]}),p&&(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Phường/X\xe3"}),r.jsx("p",{className:"text-xl font-bold text-foreground",children:(p.administrative_boundaries?.total||0).toLocaleString("vi-VN")}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[p.administrative_boundaries?.phuong||0," phường, ",p.administrative_boundaries?.xa||0," x\xe3"]})]}),(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Đường phố"}),r.jsx("p",{className:"text-xl font-bold text-foreground",children:(p.streets?.total||0).toLocaleString("vi-VN")})]}),(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"C\xf4ng tr\xecnh"}),r.jsx("p",{className:"text-xl font-bold text-foreground",children:(p.buildings?.total||0).toLocaleString("vi-VN")})]}),(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"POI"}),r.jsx("p",{className:"text-xl font-bold text-foreground",children:(p.pois?.total||0).toLocaleString("vi-VN")})]})]}),(0,r.jsxs)("div",{className:"flex gap-4",style:{height:"calc(100vh - 340px)",minHeight:"500px"},children:[(0,r.jsxs)("div",{className:"w-72 flex-shrink-0 flex flex-col gap-4 overflow-visible",children:[(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4 relative z-50",children:[r.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Chọn phường/x\xe3"}),r.jsx(y,{selectedIds:k,onSelectionChange:C,maxSelection:10}),k.length>0&&r.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:r.jsx("button",{onClick:()=>{C([]),eo()},className:"w-full text-sm text-muted-foreground hover:text-destructive transition-colors",children:"X\xf3a tất cả lựa chọn"})})]}),(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Loại bản đồ"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("button",{onClick:()=>I("satellite"),className:(0,m.cn)("flex flex-col items-center gap-1 p-3 rounded-lg border transition-all","satellite"===E?"border-accent bg-accent/10":"border-border hover:bg-muted"),children:[r.jsx(u,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs",children:"Vệ tinh"})]}),(0,r.jsxs)("button",{onClick:()=>I("osm"),className:(0,m.cn)("flex flex-col items-center gap-1 p-3 rounded-lg border transition-all","osm"===E?"border-accent bg-accent/10":"border-border hover:bg-muted"),children:[r.jsx(x.Z,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs",children:"Đường phố"})]})]})]}),(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Lớp hiển thị"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:A.boundaries,onChange:()=>el("boundaries"),className:"w-4 h-4 rounded border-border text-accent focus:ring-accent"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-foreground",children:"Ranh giới H\xe0 Nội"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Viền đỏ"})]})]}),(0,r.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:A.districts,onChange:()=>el("districts"),className:"w-4 h-4 rounded border-border text-accent focus:ring-accent"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-foreground",children:"Phường/X\xe3"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[j?.num_wards||126," đơn vị"]})]})]}),(0,r.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:A.pois,onChange:()=>el("pois"),className:"w-4 h-4 rounded border-border text-accent focus:ring-accent"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-foreground",children:"Điểm POI"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Địa điểm quan trọng"})]})]}),(0,r.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:A.traffic,onChange:()=>el("traffic"),className:"w-4 h-4 rounded border-border text-accent focus:ring-accent"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-foreground",children:"Giao th\xf4ng"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"T\xecnh trạng đường (TomTom)"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-card rounded-lg border border-border p-4 flex-1 overflow-y-auto",children:[r.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:"Ch\xfa th\xedch"}),(0,r.jsxs)("div",{className:"space-y-1.5 text-xs mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-1 bg-red-600 rounded"}),r.jsx("span",{className:"text-muted-foreground",children:"Ranh giới HN"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-2.5 bg-blue-500/30 border border-white rounded"}),r.jsx("span",{className:"text-muted-foreground",children:"Phường/X\xe3"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-2.5 bg-amber-400/40 border-2 border-amber-500 rounded"}),r.jsx("span",{className:"text-muted-foreground",children:"Đ\xe3 chọn"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-2.5 bg-green-500/40 border-2 border-green-600 rounded"}),r.jsx("span",{className:"text-muted-foreground",children:"Đang xem"})]})]}),(0,r.jsxs)("div",{className:"border-t border-border pt-3",children:[r.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Loại địa điểm (POI)"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-[10px]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:"#dc2626"}}),r.jsx("span",{children:"Y tế"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:"#4f46e5"}}),r.jsx("span",{children:"Gi\xe1o dục"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:"#059669"}}),r.jsx("span",{children:"Ng\xe2n h\xe0ng"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:"#ea580c"}}),r.jsx("span",{children:"Mua sắm"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:"#d97706"}}),r.jsx("span",{children:"Ẩm thực"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:"#475569"}}),r.jsx("span",{children:"Cơ quan"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:"#0891b2"}}),r.jsx("span",{children:"Vận tải"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:"#7c3aed"}}),r.jsx("span",{children:"Du lịch"})]})]})]}),A.traffic&&(0,r.jsxs)("div",{className:"border-t border-border pt-3 mt-3",children:[r.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"T\xecnh trạng giao th\xf4ng"}),(0,r.jsxs)("div",{className:"space-y-1 text-[10px]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-4 h-1.5 rounded",style:{backgroundColor:"#00E400"}}),r.jsx("span",{children:"Th\xf4ng tho\xe1ng"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-4 h-1.5 rounded",style:{backgroundColor:"#FFFF00"}}),r.jsx("span",{children:"Nhẹ"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-4 h-1.5 rounded",style:{backgroundColor:"#FF7E00"}}),r.jsx("span",{children:"Trung b\xecnh"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-4 h-1.5 rounded",style:{backgroundColor:"#FF0000"}}),r.jsx("span",{children:"Đ\xf4ng đ\xfac"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[r.jsx("div",{className:"w-4 h-1.5 rounded",style:{backgroundColor:"#7E0023"}}),r.jsx("span",{children:"Tắc nghẽn"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"flex-1 bg-card rounded-xl border border-border overflow-hidden relative",children:[e?r.jsx("div",{className:"h-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(d.Z,{className:"w-8 h-8 animate-spin text-accent mx-auto mb-2"}),r.jsx("p",{className:"text-muted-foreground",children:"Đang tải bản đồ..."})]})}):l?(0,r.jsxs)(z,{center:F,zoom:P,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,ref:$,children:[r.jsx(X,{center:F,zoom:P,bounds:L}),r.jsx(G,{attribution:Q[E].attribution,url:Q[E].url}),"satellite"===E&&r.jsx(G,{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-labels/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stamen.com">Stamen Design</a>',opacity:.8}),A.traffic&&J.url&&r.jsx(G,{url:J.url,attribution:J.attribution,opacity:.7,zIndex:100}),A.boundaries&&b&&r.jsx(W,{data:b,style:es,onEachFeature:ea},"hanoi-boundary"),A.districts&&N&&r.jsx(W,{data:N,style:er,onEachFeature:en},ei),A.pois&&ec.map(e=>{var t,s;let a=(t=e.subcategory,s=e.category,t&&Y[t]?Y[t]:"healthcare"===s?Y.hospital:"education"===s?Y.school:"finance"===s?Y.bank:"shop"===s?Y.convenience:"tourism"===s?Y.hotel:"leisure"===s?Y.park:Y.default),n=e.subcategory?ee[e.subcategory]||e.subcategory:e.category;return r.jsx(H,{center:[e.location.lat,e.location.lng],radius:8,pathOptions:{color:"#ffffff",weight:2,fillColor:a.color,fillOpacity:.95},children:r.jsx(V,{children:(0,r.jsxs)("div",{className:"min-w-[220px] max-w-[280px]",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2 mb-2",children:[r.jsx("span",{className:"text-2xl",children:a.emoji}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-bold text-base text-gray-900 leading-tight",children:e.name}),r.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:n})]})]}),(0,r.jsxs)("div",{className:"space-y-1.5 text-sm border-t border-gray-100 pt-2 mt-2",children:[e.address&&(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-gray-400 flex-shrink-0",children:"\uD83D\uDCCD"}),r.jsx("span",{className:"text-gray-700",children:e.address})]}),e.phone&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400",children:"\uD83D\uDCDE"}),r.jsx("a",{href:`tel:${e.phone}`,className:"text-blue-600 hover:underline",children:e.phone})]}),e.website&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400",children:"\uD83C\uDF10"}),r.jsx("a",{href:e.website.startsWith("http")?e.website:`https://${e.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline truncate max-w-[180px]",children:e.website.replace(/^https?:\/\//,"").split("/")[0]})]}),e.opening_hours&&(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-gray-400",children:"\uD83D\uDD50"}),r.jsx("span",{className:"text-gray-700",children:e.opening_hours})]})]}),r.jsx("div",{className:"mt-3 pt-2 border-t border-gray-100",children:r.jsx("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs font-medium text-white",style:{backgroundColor:a.color},children:a.name})})]})})},e.id)})]}):r.jsx("div",{className:"h-full flex items-center justify-center",children:r.jsx("p",{className:"text-muted-foreground",children:"Đang khởi tạo bản đồ..."})}),_&&S&&(0,r.jsxs)("div",{className:"absolute top-4 left-4 bg-black/70 text-white px-3 py-2 rounded-lg text-sm z-[1000]",children:[r.jsx("p",{className:"font-semibold",children:S.boundary.name}),(0,r.jsxs)("p",{className:"text-xs opacity-80",children:[S.boundary.area_km2.toFixed(2)," km\xb2 • ",S.statistics.pois.total," POI"]})]}),(L||11!==P)&&r.jsx("button",{onClick:eo,className:"absolute bottom-4 left-4 bg-white dark:bg-gray-800 shadow-lg px-3 py-2 rounded-lg text-sm font-medium z-[1000] hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Xem to\xe0n bộ H\xe0 Nội"})]}),T&&k.length>0&&r.jsx("div",{className:"hidden lg:flex lg:flex-col w-96 flex-shrink-0 gap-4 overflow-y-auto",children:r.jsx(U,{boundaryId:_,boundaryName:S?.boundary.name||"",boundaryDetails:S})})]})]})}},9979:(e,t,s)=>{"use strict";s.d(t,{li:()=>i,xW:()=>d,wK:()=>o,Lj:()=>c,B7:()=>l});var r=s(4464);class a{client;constructor(){this.client=r.Z.create({baseURL:"http://localhost:8000/api/v1",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(e=>e,e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,e=>(e.response?.status,Promise.reject(e)))}async get(e,t){return(await this.client.get(e,{params:t})).data}async post(e,t){return(await this.client.post(e,t)).data}async put(e,t){return(await this.client.put(e,t)).data}async patch(e,t,s){return(await this.client.patch(e,t,s)).data}async delete(e){return(await this.client.delete(e)).data}}let n=new a,l={getStatistics:async()=>n.get("/reports/statistics"),getReports:async e=>n.get("/reports/",e),getReport:async e=>n.get(`/reports/${e}`),getNearbyReports:async(e,t,s=1e3,r=20)=>n.get("/reports/nearby",{lat:e,lng:t,radius:s,limit:r}),createReport:async e=>n.post("/reports/",e),updateStatus:async(e,t)=>n.patch(`/reports/${e}/status`,null,{params:{new_status:t}})},i={getBoundaries:async e=>n.get("/geographic/boundaries",e),getBoundariesGeoJSON:async e=>n.get("/geographic/boundaries/geojson",e),getHanoiUnionBoundary:async e=>n.get("/geographic/boundaries/hanoi-union",e),getBoundary:async(e,t=!1)=>n.get(`/geographic/boundaries/${e}`,{include_geometry:t}),getBoundaryContainingPoint:async(e,t,s)=>n.get("/geographic/boundaries/containing-point",{latitude:e,longitude:t,admin_level:s}),getStreets:async e=>n.get("/geographic/streets",e),getNearbyStreets:async(e,t,s=500,r=20)=>n.get("/geographic/streets/nearby",{lat:e,lng:t,radius:s,limit:r}),getBoundariesListSimple:async(e=6)=>n.get("/geographic/boundaries/list/simple",{admin_level:e}),getBoundaryDetails:async(e,t=!0,s=5e-4)=>n.get(`/geographic/boundaries/${e}/details`,{include_geometry:t,simplify_tolerance:s}),getMultiBoundaryDetails:async(e,t=!0,s=.001)=>n.post(`/geographic/boundaries/multi-details?include_geometry=${t}&simplify_tolerance=${s}`,e),getUrbanData:async e=>n.get(`/geographic/boundaries/${e}/urban-data`)},o={check:async()=>(await fetch(`${"http://localhost:8000/api/v1".replace("/api/v1","")||0}/health`)).json()},c={getWeather:async()=>n.get("/realtime/weather/latest"),getAirQuality:async()=>n.get("/realtime/air-quality/latest"),getTrafficHotspots:async()=>n.get("/realtime/traffic/hotspots"),getWeatherMultiCity:async()=>n.get("/realtime/weather/cities"),getAirQualityMultiCity:async()=>n.get("/realtime/air-quality/cities")},d={getStatistics:async()=>n.get("/geographic/statistics")}},2570:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/vudangkhoa/Working/CityLens/web-dashboard/src/app/(dashboard)/geographic/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[672,966,116,4],()=>s(1588));module.exports=r})();